<!DOCTYPE html>
<html lang="pt-BR" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sua Quietude, Sua Arena - A Jornada do Destrave</title>
    <script src="https://cdn.tailwindcss.com?plugins=typography"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;900&display=swap" rel="stylesheet">
    
    <style>
        /* Paleta: #111827 (Deep Ink), #F3F4F6 (Calm Gray), #D69E2E (Accent Gold), #4A5568 (Muted Slate) */
        body {
            font-family: 'Inter', sans-serif;
            background-color: #F3F4F6;
            color: #1F2937;
            line-height: 1.7;
        }
        .step-screen { display: none; }
        .chart-container { position: relative; width: 100%; max-width: 500px; margin: auto; height: auto; min-height: 350px; }

        /* Animações */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(15px); }
            to { opacity: 1; transform: translateY(0); }
        }
        @keyframes popIn {
            0% { opacity: 0; transform: scale(0.95); }
            100% { opacity: 1; transform: scale(1); }
        }
        .animate-fade-in { animation: fadeIn 0.6s ease-out forwards; }
        .animate-pop-in { animation: popIn 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94) forwards; }
        
        /* Tipografia e Estilo de Conteúdo */
        .prose h2 { color: #111827; font-weight: 900; letter-spacing: -0.025em; }
        .prose h3 { color: #1F2937; font-weight: 700; margin-top: 2.5rem; }
        .prose h4 { color: #4A5568; font-weight: 600; }
        .prose p { color: #374151; }
        .prose strong { color: #B45309; } /* Um dourado mais escuro para texto */
        .prose blockquote { border-left-color: #D69E2E; background-color: #FFFBEB; }

        /* Blocos de Conteúdo Customizados */
        .content-section {
            background-color: white; border-radius: 0.75rem; padding: 2rem;
            margin: 2rem 0; box-shadow: 0 4px 6px -1px rgba(0,0,0,0.05), 0 2px 4px -1px rgba(0,0,0,0.03);
            border: 1px solid #E5E7EB;
        }
        .story-box {
            background-color: #FEFCE8; border: 1px solid #FBBF24; border-left: 5px solid #FBBF24;
            border-radius: 0.5rem; padding: 1.5rem; margin: 2.5rem 0; position: relative;
        }
        .story-box::before {
            content: '“'; position: absolute; top: -1rem; left: 1rem; font-size: 4rem;
            color: #FBBF24; opacity: 0.3; font-family: Georgia, serif;
        }
        .highlight-box {
            background: linear-gradient(135deg, #4338CA 0%, #312E81 100%); color: white;
            border-radius: 0.75rem; padding: 2rem; margin: 2rem 0;
            box-shadow: 0 10px 20px rgba(49, 46, 129, 0.2);
        }
        .highlight-box h4 { color: #EEF2FF; }
        .highlight-box p { color: #C7D2FE; }
        .practice-section { 
            background-color: #1F2937; border-radius: 1rem; padding: 2.5rem; 
            margin-top: 3rem; border: 1px solid #4A5568;
        }
        .practice-section h3, .practice-section label { color: white; }
        .practice-section p { color: #D1D5DB; }
        .practice-section textarea, .practice-section input[type=text] {
            background-color: #374151; color: white; border: 1px solid #4A5568;
            border-radius: 0.5rem; padding: 0.75rem; width: 100%;
            transition: all 0.2s ease-in-out;
        }
        .practice-section textarea:focus, .practice-section input:focus {
            outline: none; border-color: #D69E2E; ring: 2px; ring-color: #D69E2E;
        }

        /* Feedback e Botões */
        .feedback-card { 
            background: linear-gradient(145deg, #111827 0%, #1F2937 100%); color: white; 
            border-radius: 1rem; padding: 2rem 3rem; text-align: center;
            box-shadow: 0 20px 25px -5px rgba(0,0,0,0.1), 0 10px 10px -5px rgba(0,0,0,0.04);
        }
        .main-cta-button {
            background-color: #D69E2E; color: #111827; font-weight: 700;
            padding: 1rem 2rem; border-radius: 0.5rem; text-transform: uppercase;
            letter-spacing: 0.05em; transition: all 0.3s ease;
            box-shadow: 0 4px 6px rgba(214, 158, 46, 0.2); border: none; cursor: pointer;
        }
        .main-cta-button:hover {
            transform: translateY(-3px); box-shadow: 0 7px 14px rgba(214, 158, 46, 0.3);
        }
    </style>
</head>
<body class="bg-calm-gray">

    <header class="bg-deep-ink shadow-lg sticky top-0 z-50">
        <div class="container mx-auto p-4 flex justify-between items-center">
            <h1 class="text-xl md:text-2xl font-bold text-white tracking-tight">Sua Jornada</h1>
            <p id="progress-text" class="text-sm text-gray-400">Passo 0 de 7</p>
        </div>
        <div class="bg-muted-slate/50 h-1.5">
            <div id="progress-bar" class="bg-accent-gold h-1.5 rounded-r-full transition-all duration-700 ease-out" style="width: 0%;"></div>
        </div>
    </header>

    <main id="app-container" class="container mx-auto p-4 md:p-8 max-w-4xl">
        <!-- TELA DE BLOQUEIO -->
        <div id="lock-screen" class="step-screen">
             <div class="bg-white p-8 md:p-12 rounded-xl shadow-xl text-center border-t-4 border-accent-gold animate-pop-in">
                <svg class="w-16 h-16 mx-auto text-accent-gold mb-4" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"></path></svg>
                <h2 class="text-4xl font-extrabold text-deep-ink mb-3">Sua Jornada Continua</h2>
                <p class="text-muted-slate text-lg max-w-xl mx-auto">A próxima porta da sua transformação aguarda. Insira a palavra-chave para revelar o caminho.</p>
                <div class="max-w-md mx-auto mt-8">
                    <div class="flex flex-col sm:flex-row gap-3">
                        <input type="text" id="password-input" placeholder="Palavra-Chave do Dia" class="flex-grow p-4 border-2 border-gray-300 rounded-lg focus:ring-4 focus:ring-accent-gold/50 focus:border-accent-gold focus:outline-none uppercase text-center text-xl tracking-widest font-bold transition-all">
                        <button id="unlock-btn" class="main-cta-button px-8">Destravar</button>
                    </div>
                    <p id="password-error" class="text-red-600 mt-4 h-6 font-medium"></p>
                </div>
            </div>
        </div>

        <!-- TELA DE FEEDBACK -->
        <div id="feedback-screen" class="step-screen">
            <div class="feedback-card animate-pop-in">
                <div id="feedback-content" class="space-y-6"></div>
                <button id="continue-btn" class="mt-8 bg-accent-gold text-deep-ink font-bold py-3 px-10 rounded-full hover:bg-yellow-500 transition-transform transform hover:scale-105 shadow-lg">Continuar Jornada →</button>
            </div>
        </div>

        <!-- Passo 1: Sua Quietude é a Sua Arena -->
        <div id="step-1" class="step-screen">
            <header class="text-center mb-12 animate-fade-in">
                <h2 class="text-5xl font-black text-deep-ink tracking-tighter mb-4">Passo 1: Sua Quietude é a Sua Arena</h2>
                <p class="text-xl text-muted-slate max-w-3xl mx-auto">Vamos parar de lutar contra a sua natureza e começar a usá-la como sua maior arma estratégica.</p>
            </header>
            <article class="prose max-w-none animate-fade-in" style="animation-delay: 200ms;">
                <div class="content-section">
                    <h3>A voz que não sai</h3>
                    <p>Você está na reunião. A ideia perfeita cristaliza na sua mente. É clara, é poderosa, é a solução. Mas, entre a sua mente e a sua boca, existe um abismo. A oportunidade passa. O silêncio vence. E o gosto amargo do "e se eu tivesse falado?" fica. Se isso te arrepia, é porque você reconhece a verdade: <strong>seu silêncio não é vazio, é potência contida.</strong></p>
                </div>
                <div class="story-box">
                    <h4>De Invisível a Indispensável</h4>
                    <p class="italic">Ana, uma analista de dados, se sentia como um fantasma nas reuniões. Sua virada de chave não foi aprender a "ser mais extrovertida". Foi quando ela percebeu que seu superpoder era a <strong>Escuta Profunda</strong>. Em vez de tentar falar mais, ela começou a fazer as perguntas que ninguém fazia, baseadas no que ela ouvia nas entrelinhas. Em três meses, ela não era mais a "calada", era a "estrategista" do time.</p>
                </div>
                <div class="highlight-box">
                    <h4>A Grande Mentira do Mundo Barulhento</h4>
                    <p>A sociedade nos vendeu o mito do "líder carismático" — barulhento, dominante, sempre no centro. Tentar vestir essa fantasia não é só exaustivo, é um desrespeito à sua arquitetura cerebral. Você não foi feito para o palco, foi feito para os bastidores, onde as verdadeiras decisões são moldadas. Pare de tentar ser um microfone. <strong>Você é a sala de controle.</strong></p>
                </div>
            </article>
            <div class="practice-section animate-fade-in" style="animation-delay: 400ms;">
                <h3 class="text-2xl font-bold mb-4 text-center">✨ Workshop: Inventário de Ferramentas</h3>
                <p class="mb-8 text-center">Reconhecer suas ferramentas é o primeiro passo para usá-las. Selecione as que você mais se identifica.</p>
                <div id="superpoderes-list-1" class="space-y-3 max-w-2xl mx-auto"></div>
                <div class="mt-8">
                    <label for="reflexao-superpoder-1" class="block font-medium mb-2">Momento de Análise:</label>
                    <textarea id="reflexao-superpoder-1" rows="3" placeholder="Lembre-se de uma vez que você usou um desses poderes, mesmo que em silêncio. Descreva a situação."></textarea>
                </div>
            </div>
            <div class="text-center mt-12">
                 <button data-step="1" class="submit-btn main-cta-button">Analisar e Revelar Meu Coaching →</button>
            </div>
        </div>
        
        <!-- Passo 2: Clareza Cirúrgica -->
        <div id="step-2" class="step-screen">
             <header class="text-center mb-12 animate-fade-in">
                <h2 class="text-5xl font-black text-deep-ink tracking-tighter mb-4">Passo 2: Clareza Cirúrgica</h2>
                <p class="text-xl text-muted-slate max-w-3xl mx-auto">Sua mente processa mil informações por segundo. Isso não é um bug, é um feature. Vamos aprender a canalizar essa potência.</p>
            </header>
            <article class="prose max-w-none animate-fade-in" style="animation-delay: 200ms;">
                 <div class="content-section">
                    <h3>O paradoxo do "branco"</h3>
                    <p>Você sabe do assunto. Sabe mais que todos na sala. Mas quando a atenção se volta para você, o cérebro parece um HD superaquecido. É o "branco". Isso não é falta de conhecimento. É um <strong>excesso de processamento</strong> sem um framework. Sua mente está tentando te dar todas as respostas de uma vez e acaba travando o sistema. Precisamos de um funil.</p>
                </div>
                <div class="highlight-box">
                    <h4>O Funil Mental: A Regra 1-3-1</h4>
                    <p>Esqueça discursos complexos. Sua ferramenta para transformar o caos em clareza é a estrutura <strong>1-3-1</strong>. É simples, memorável e absurdamente eficaz. Antes de falar, você organiza seu pensamento assim:</p>
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mt-6 text-center">
                        <div><p class="font-bold text-lg text-white">1. A manchete</p><p class="text-sm text-indigo-200">A grande ideia em uma frase.</p></div>
                        <div><p class="font-bold text-lg text-white">3. Os Pilares</p><p class="text-sm text-indigo-200">Três pontos que sustentam a manchete.</p></div>
                        <div><p class="font-bold text-lg text-white">1. O Convite</p><p class="text-sm text-indigo-200">A próxima ação ou pergunta.</p></div>
                    </div>
                </div>
            </article>
            <div class="practice-section animate-fade-in" style="animation-delay: 400ms;">
                <h3 class="text-2xl font-bold mb-6 text-center">✨ Workshop: Construindo seu Funil</h3>
                <div class="space-y-4 max-w-2xl mx-auto">
                    <div><label for="contexto-situacao-2" class="block font-medium mb-2">Situação ou Assunto:</label><input type="text" id="contexto-situacao-2" placeholder="Ex: Apresentar o status do Projeto X"></div>
                    <div><label for="ponto1-2" class="block font-medium mb-2">1. A Manchete (A Grande Ideia):</label><textarea id="ponto1-2" rows="2" placeholder="Ex: O Projeto X está no caminho certo, mas precisamos ajustar um recurso-chave para evitar atrasos."></textarea></div>
                    <div><label for="ponto2-2" class="block font-medium mb-2">2. Pilar de Suporte 1:</label><textarea id="ponto2-2" rows="2" placeholder="Ex: O time de desenvolvimento está sobrecarregado."></textarea></div>
                    <div><label for="ponto3-2" class="block font-medium mb-2">3. Pilar de Suporte 2:</label><textarea id="ponto3-2" rows="2" placeholder="Ex: O cliente solicitou uma mudança não prevista."></textarea></div>
                </div>
            </div>
             <div class="text-center mt-12"><button data-step="2" class="submit-btn main-cta-button">Analisar e Revelar Meu Coaching →</button></div>
        </div>

        <!-- NOTA: Para os passos 3-7, apliquei a nova estrutura visual, mas mantive o texto original. -->
        <!-- O ideal é reescrever esses textos seguindo o tom mais empático dos passos 1 e 2. -->

        <!-- Passo 3: O Timing Perfeito -->
        <div id="step-3" class="step-screen">
             <header class="text-center mb-12 animate-fade-in"><h2 class="text-5xl font-black text-deep-ink tracking-tighter mb-4">Passo 3: O Timing Perfeito</h2><p class="text-xl text-muted-slate max-w-3xl mx-auto">Domine a arte de ser ouvido no momento certo.</p></header>
             <article class="prose max-w-none animate-fade-in" style="animation-delay: 200ms;">
                <div class="content-section"><h3>O Fantasma da Reunião</h3><p>Você já se sentiu como um fantasma em uma reunião? Presente, mas invisível. A discussão acelera, você tem uma contribuição valiosa, mas quando finalmente encontra uma brecha, o assunto já mudou. A resposta não é sobre coragem. É sobre timing estratégico.</p></div>
                <div class="story-box"><h4>A Revolução de Lucas: De Espectador a Estrategista</h4><p class="italic">Lucas era um gamer excepcional que se tornou o estrategista do time não pela velocidade, mas pela precisão de suas intervenções, usando a "Janela da Pergunta" nos momentos exatos.</p></div>
                 <div class="highlight-box"><h3>As 5 Janelas de Oportunidade Douradas</h3><p>Sua capacidade de observar antes de agir é um superpoder. Use-o para identificar estes momentos-chave: A Janela da Pergunta, da Complementação, da Síntese, da Perspectiva e da Solução.</p></div>
            </article>
            <div class="practice-section animate-fade-in" style="animation-delay: 400ms;">
                <h3 class="text-2xl font-bold mb-6 text-center">✨ Workshop: Qual a Melhor Jogada?</h3>
                <div class="space-y-6">
                    <div>
                        <h4 class="font-semibold text-white mb-2">Cenário: A Reunião Acelerada</h4>
                        <p class="text-sm text-gray-300 mb-3">Seu colega apresenta uma ideia, mas esquece um ponto importante. Qual sua melhor estratégia?</p>
                        <div id="timing-options-1" class="space-y-2 text-white">
                             <label class="flex items-start p-3 bg-gray-800 rounded-lg hover:bg-gray-700 cursor-pointer"><input type="radio" name="timing1" value="c" class="mt-1 h-5 w-5"><span class="ml-3 text-sm">Usar uma "entrada suave": "Ótima ideia, João. Complementando..."</span></label>
                             <label class="flex items-start p-3 bg-gray-800 rounded-lg hover:bg-gray-700 cursor-pointer"><input type="radio" name="timing1" value="d" class="mt-1 h-5 w-5"><span class="ml-3 text-sm">Fazer uma pergunta estratégica: "João, como você vê o impacto disso no orçamento?"</span></label>
                        </div>
                    </div>
                    <div><label for="timing-reflexao-3" class="block font-medium mb-2">Reflexão Pessoal:</label><textarea id="timing-reflexao-3" rows="3" placeholder="Pense em uma oportunidade de falar que você perdeu. Qual janela você poderia ter usado?"></textarea></div>
                </div>
            </div>
            <div class="text-center mt-12"><button data-step="3" class="submit-btn main-cta-button">Analisar e Revelar Meu Coaching →</button></div>
        </div>

        <!-- Passo 4: Energia Inteligente -->
        <div id="step-4" class="step-screen">
             <header class="text-center mb-12 animate-fade-in"><h2 class="text-5xl font-black text-deep-ink tracking-tighter mb-4">Passo 4: Energia Inteligente</h2><p class="text-xl text-muted-slate max-w-3xl mx-auto">Comunique sem se esgotar, gerenciando sua energia social.</p></header>
             <div class="practice-section animate-fade-in" style="animation-delay: 400ms;">
                <h3 class="text-2xl font-bold mb-6 text-center">✨ Workshop: Kit de Sobrevivência Social</h3>
                <div class="space-y-4">
                    <div><label for="energia-drenos-4" class="block font-medium mb-2">Meus Maiores Drenos de Energia:</label><textarea id="energia-drenos-4" rows="3" placeholder="Ex: Reuniões longas, networking forçado..."></textarea></div>
                    <div><label for="energia-antes-4" class="block font-medium mb-2">Minhas Estratégias de PREPARAÇÃO (Antes):</label><textarea id="energia-antes-4" rows="3" placeholder="Ex: Reservar 30 min em silêncio..."></textarea></div>
                    <div><label for="energia-depois-4" class="block font-medium mb-2">Minhas Estratégias de RECUPERAÇÃO (Depois):</label><textarea id="energia-depois-4" rows="3" placeholder="Ex: Tomar um banho relaxante..."></textarea></div>
                </div>
            </div>
             <div class="text-center mt-12"><button data-step="4" class="submit-btn main-cta-button">Analisar e Revelar Meu Coaching →</button></div>
        </div>

        <!-- Passo 5: Aplicação Real -->
        <div id="step-5" class="step-screen">
             <header class="text-center mb-12 animate-fade-in"><h2 class="text-5xl font-black text-deep-ink tracking-tighter mb-4">Passo 5: Aplicação Real</h2><p class="text-xl text-muted-slate max-w-3xl mx-auto">Transforme teoria em resultados concretos.</p></header>
             <div class="practice-section animate-fade-in">
                <h3 class="text-2xl font-bold mb-6 text-center">✨ Workshop: Construa Sua Ponte para a Ação</h3>
                 <div class="space-y-4">
                    <div><label for="aplicacao-cenario-5" class="block font-medium mb-2">O Cenário:</label><input type="text" id="aplicacao-cenario-5" placeholder="Ex: Apresentar o resultado do projeto para a diretoria"></div>
                    <div><label for="aplicacao-plano-5" class="block font-medium mb-2">Meu Plano de Ação (integrando os passos):</label><textarea id="aplicacao-plano-5" rows="4" placeholder="Ex: 1. (Clareza) Vou estruturar nos 3 pontos chave..."></textarea></div>
                </div>
            </div>
             <div class="text-center mt-12"><button data-step="5" class="submit-btn main-cta-button">Analisar e Revelar Meu Coaching →</button></div>
        </div>

        <!-- Passo 6: Confiança Inabalável -->
        <div id="step-6" class="step-screen">
             <header class="text-center mb-12 animate-fade-in"><h2 class="text-5xl font-black text-deep-ink tracking-tighter mb-4">Passo 6: Confiança Inabalável</h2><p class="text-xl text-muted-slate max-w-3xl mx-auto">Construa uma base sólida de autoconfiança autêntica.</p></header>
             <div class="practice-section animate-fade-in">
                <h3 class="text-2xl font-bold mb-6 text-center">✨ Workshop: Seu Diário de Vitórias</h3>
                <div class="space-y-4">
                    <div><label for="vitorias-recentes-6" class="block font-medium mb-2">Minhas Vitórias Recentes (última semana):</label><textarea id="vitorias-recentes-6" rows="4" placeholder="Ex: 1. Consegui dar minha opinião numa reunião..."></textarea></div>
                </div>
            </div>
             <div class="text-center mt-12"><button data-step="6" class="submit-btn main-cta-button">Analisar e Revelar Meu Coaching →</button></div>
        </div>

        <!-- Passo 7: Liberte Sua Voz Autêntica -->
        <div id="step-7" class="step-screen">
             <header class="text-center mb-12 animate-fade-in"><h2 class="text-5xl font-black text-deep-ink tracking-tighter mb-4">Passo 7: Liberte Sua Voz Autêntica</h2><p class="text-xl text-muted-slate max-w-3xl mx-auto">Transforme sua autenticidade em sua maior força.</p></header>
             <div class="practice-section animate-fade-in">
                <h3 class="text-2xl font-bold mb-6 text-center">✨ Workshop: Seu Compromisso com o Futuro</h3>
                <div class="space-y-4">
                    <div><label for="metas-30-dias-7" class="block font-medium mb-2">Minhas Metas de Comunicação:</label><textarea id="metas-30-dias-7" rows="4" placeholder="Ex: 1. Vou me posicionar com uma ideia completa..."></textarea></div>
                </div>
            </div>
             <div class="text-center mt-12"><button data-step="7" class="submit-btn main-cta-button text-lg">Finalizar Jornada e Gerar Meu Dossiê de Poder! 🎉</button></div>
        </div>
        
        <!-- Relatório Final -->
        <div id="final-report" class="step-screen">
             <header class="text-center mb-12 animate-fade-in">
                 <svg class="w-20 h-20 mx-auto text-green-500 mb-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4M7.835 4.697a3.42 3.42 0 001.946-.806 3.42 3.42 0 014.438 0 3.42 3.42 0 001.946.806 3.42 3.42 0 013.138 3.138 3.42 3.42 0 00.806 1.946 3.42 3.42 0 010 4.438 3.42 3.42 0 00-.806 1.946 3.42 3.42 0 01-3.138 3.138 3.42 3.42 0 00-1.946.806 3.42 3.42 0 01-4.438 0 3.42 3.42 0 00-1.946-.806 3.42 3.42 0 01-3.138-3.138 3.42 3.42 0 00-.806-1.946 3.42 3.42 0 010-4.438 3.42 3.42 0 00.806-1.946 3.42 3.42 0 013.138-3.138z"></path></svg>
                <h2 class="text-5xl font-black text-deep-ink tracking-tighter mb-4">Dossiê de Poder Concluído</h2>
                <p class="text-xl text-muted-slate max-w-3xl mx-auto">Parabéns. Você não apenas completou um curso, você mapeou seu próprio poder. Este é o seu relatório personalizado.</p>
            </header>
            <div class="content-section bg-deep-ink text-white">
                <h3 class="text-2xl font-bold text-accent-gold mb-6 text-center">Seu Perfil de Poder Introvertido</h3>
                <div class="chart-container"><canvas id="superpoderesChart"></canvas></div>
            </div>
             <div id="report-content" class="space-y-6 mt-8"></div>
            <div class="mt-12 text-center bg-gray-200 p-8 rounded-lg">
                <h3 class="text-2xl font-bold text-deep-ink mb-2">A jornada não termina aqui. Ela começa.</h3>
                <p class="text-muted-slate max-w-2xl mx-auto">Sua quietude não é uma barreira. É sua arena. Agora você tem as ferramentas para lutar nela. E vencer. O mundo não precisa de mais barulho. Precisa da sua clareza.</p>
            </div>
        </div>
    </main>

    <script>
    document.addEventListener('DOMContentLoaded', () => {
        const app = {
            state: { currentStep: 1, answers: {} },
            passwords: { 1: "ARENA", 2: "CLAREZA", 3: "TIMING", 4: "ENERGIA", 5: "ACAO", 6: "CONFIANCA", 7: "LIBERDADE" },
            ui: {},

            init() {
                this.ui = {
                    screens: document.querySelectorAll('.step-screen'),
                    progressBar: document.getElementById('progress-bar'),
                    progressText: document.getElementById('progress-text'),
                    passwordInput: document.getElementById('password-input'),
                    unlockBtn: document.getElementById('unlock-btn'),
                    passwordError: document.getElementById('password-error'),
                    feedbackScreen: document.getElementById('feedback-screen'),
                    feedbackContent: document.getElementById('feedback-content'),
                    continueBtn: document.getElementById('continue-btn'),
                };
                this.loadState();
                this.addEventListeners();
                this.renderDynamicContent();
                this.showCurrentScreen();
                this.updateProgressBar();
            },

            loadState() {
                const savedState = localStorage.getItem('destraveJornadaImersiva_v1');
                if (savedState) this.state = JSON.parse(savedState);
            },

            saveState() {
                localStorage.setItem('destraveJornadaImersiva_v1', JSON.stringify(this.state));
            },
            
            showScreen(screenId) {
                this.ui.screens.forEach(screen => screen.style.display = 'none');
                const targetScreen = document.getElementById(screenId);
                if (targetScreen) targetScreen.style.display = 'block';
            },

            showCurrentScreen() {
                 if (this.state.currentStep > 7) {
                    this.showScreen('final-report');
                    this.generateReport(); 
                } else {
                    this.showScreen('lock-screen');
                    this.ui.passwordInput.setAttribute('placeholder', `Palavra-Chave ${this.state.currentStep}`);
                }
            },

            updateProgressBar() {
                const step = Math.min(this.state.currentStep - 1, 7);
                const progress = (step / 7) * 100;
                this.ui.progressBar.style.width = `${progress}%`;
                this.ui.progressText.textContent = `Passo ${step} de 7 concluído`;
                 if (this.state.currentStep > 7) {
                     this.ui.progressBar.style.width = `100%`;
                     this.ui.progressText.textContent = `Jornada Concluída!`;
                }
            },

            renderDynamicContent() {
                const superpoderes = [
                    { id: "escuta", power: "A Superaudição (Escuta Profunda)" },
                    { id: "analise", power: "O Raio-X Mental (Análise Crítica)" },
                    { id: "foco", power: "O Foco de Laser (Concentração)" },
                    { id: "observacao", power: "A Visão Além do Alcance (Observação Aguçada)" },
                    { id: "integridade", power: "A Bússola Interna (Integridade e Convicção)" }
                ];
                const listContainer = document.getElementById('superpoderes-list-1');
                if (listContainer) {
                    listContainer.innerHTML = superpoderes.map(sp => `
                        <label class="flex items-center p-4 bg-white rounded-lg hover:bg-yellow-50 cursor-pointer shadow-sm border border-gray-200 transition-all duration-200 has-[:checked]:bg-yellow-100 has-[:checked]:border-accent-gold">
                            <input type="checkbox" data-power="${sp.power}" class="h-5 w-5 rounded border-gray-300 text-accent-gold focus:ring-accent-gold shrink-0">
                            <span class="ml-4 text-gray-800 font-medium">${sp.power}</span>
                        </label>
                    `).join('');
                }
            },

            addEventListeners() {
                this.ui.unlockBtn.addEventListener('click', () => this.handleUnlock());
                this.ui.passwordInput.addEventListener('keyup', (e) => {
                    if (e.key === 'Enter') this.handleUnlock();
                });
                document.querySelectorAll('.submit-btn').forEach(btn => {
                    btn.addEventListener('click', (e) => {
                        const step = parseInt(e.target.dataset.step, 10);
                        this.collectAnswers(step);
                        if (step === 7) {
                            this.state.currentStep++;
                            this.saveState();
                            this.updateProgressBar();
                            this.showCurrentScreen();
                        } else {
                            this.generateFeedback(step);
                            this.showScreen('feedback-screen');
                        }
                        window.scrollTo(0, 0);
                    });
                });
                this.ui.continueBtn.addEventListener('click', () => this.handleContinue());
            },

            handleUnlock() {
                const enteredPassword = this.ui.passwordInput.value.trim().toUpperCase();
                const correctPassword = this.passwords[this.state.currentStep];
                if (enteredPassword === correctPassword) {
                    this.ui.passwordError.textContent = '';
                    this.showScreen(`step-${this.state.currentStep}`);
                    this.populateAnswers(this.state.currentStep);
                } else {
                    this.ui.passwordError.textContent = 'Palavra-chave incorreta. Tente novamente.';
                    this.ui.passwordInput.value = '';
                }
            },
            
            handleContinue() {
                this.state.currentStep++;
                this.saveState();
                this.updateProgressBar();
                this.showCurrentScreen();
                window.scrollTo(0, 0);
            },

            collectAnswers(step) {
                this.state.answers[step] = this.state.answers[step] || {};
                const stepContainer = document.getElementById(`step-${step}`);
                if (!stepContainer) return;

                switch(step) {
                    case 1:
                        this.state.answers[step].superpoderes = Array.from(stepContainer.querySelectorAll('input[type=checkbox]:checked')).map(el => el.dataset.power);
                        this.state.answers[step].reflexao = stepContainer.querySelector('#reflexao-superpoder-1')?.value;
                        break;
                    case 2:
                        this.state.answers[step].contexto = stepContainer.querySelector('#contexto-situacao-2')?.value;
                        this.state.answers[step].ponto1 = stepContainer.querySelector('#ponto1-2')?.value;
                        this.state.answers[step].ponto2 = stepContainer.querySelector('#ponto2-2')?.value;
                        this.state.answers[step].ponto3 = stepContainer.querySelector('#ponto3-2')?.value;
                        break;
                    case 3:
                        const timing1 = stepContainer.querySelector('input[name="timing1"]:checked');
                        this.state.answers[step].timing1 = timing1 ? timing1.nextElementSibling.textContent.trim() : 'Não respondido';
                        this.state.answers[step].reflexao = stepContainer.querySelector('#timing-reflexao-3')?.value;
                        break;
                    case 4:
                        this.state.answers[step].drenos = stepContainer.querySelector('#energia-drenos-4')?.value;
                        this.state.answers[step].preparacao = stepContainer.querySelector('#energia-antes-4')?.value;
                        this.state.answers[step].recuperacao = stepContainer.querySelector('#energia-depois-4')?.value;
                        break;
                    case 5:
                        this.state.answers[step].cenario = stepContainer.querySelector('#aplicacao-cenario-5')?.value;
                        this.state.answers[step].plano = stepContainer.querySelector('#aplicacao-plano-5')?.value;
                        break;
                    case 6:
                        this.state.answers[step].vitorias = stepContainer.querySelector('#vitorias-recentes-6')?.value;
                        break;
                    case 7:
                        this.state.answers[step].metas = stepContainer.querySelector('#metas-30-dias-7')?.value;
                        break;
                }
                this.saveState();
            },
            
            populateAnswers(step) {
                 if (!this.state.answers || !this.state.answers[step]) return;
                 const stepContainer = document.getElementById(`step-${step}`);
                 if (!stepContainer) return;
                 const answers = this.state.answers[step];
                 switch(step) {
                    case 1:
                        if(answers.superpoderes) {
                            stepContainer.querySelectorAll('input[type=checkbox]').forEach(input => {
                                input.checked = answers.superpoderes.includes(input.dataset.power);
                            });
                        }
                        stepContainer.querySelector('#reflexao-superpoder-1').value = answers.reflexao || '';
                        break;
                    case 2:
                        stepContainer.querySelector('#contexto-situacao-2').value = answers.contexto || '';
                        stepContainer.querySelector('#ponto1-2').value = answers.ponto1 || '';
                        stepContainer.querySelector('#ponto2-2').value = answers.ponto2 || '';
                        stepContainer.querySelector('#ponto3-2').value = answers.ponto3 || '';
                        break;
                    case 3: stepContainer.querySelector('#timing-reflexao-3').value = answers.reflexao || ''; break;
                    case 4:
                        stepContainer.querySelector('#energia-drenos-4').value = answers.drenos || '';
                        stepContainer.querySelector('#energia-antes-4').value = answers.preparacao || '';
                        stepContainer.querySelector('#energia-depois-4').value = answers.recuperacao || '';
                        break;
                     case 5:
                        stepContainer.querySelector('#aplicacao-cenario-5').value = answers.cenario || '';
                        stepContainer.querySelector('#aplicacao-plano-5').value = answers.plano || '';
                        break;
                     case 6: stepContainer.querySelector('#vitorias-recentes-6').value = answers.vitorias || ''; break;
                     case 7: stepContainer.querySelector('#metas-30-dias-7').value = answers.metas || ''; break;
                 }
            },
            
            generateFeedback(step) {
                let html = '';
                const { answers } = this.state;
                const name = "Guerreiro(a) Silencioso(a)";
                switch(step) {
                    case 1:
                        const count = answers[1]?.superpoderes?.length || 0;
                        const mainPower = answers[1]?.superpoderes?.[0] || 'seu principal poder';
                        html = `<h2 class="text-3xl font-bold mb-4">Análise Concluída, ${name}.</h2>`;
                        if (count > 0) {
                           html += `<p class="text-xl mb-6">Você identificou <strong>${count} ferramenta(s)</strong> em seu arsenal. Isso é autoconsciência. Isso é poder.</p><h4 class="text-lg font-semibold mb-2 text-yellow-300">💡 Sua Missão para Amanhã:</h4><p class="max-w-prose mx-auto">Foque em apenas um: <strong>${mainPower}</strong>. Não tente usá-lo, apenas observe quando ele aparece naturalmente. Seja um detetive do seu próprio poder.</p>`;
                        } else {
                            html += `<p class="text-xl mb-6">Tudo bem não reconhecer as ferramentas de imediato. A jornada é a descoberta.</p><h4 class="text-lg font-semibold mb-2 text-yellow-300">💡 Sua Missão para Amanhã:</h4><p class="max-w-prose mx-auto">Observe os outros. Tente identificar a 'Escuta Profunda' ou a 'Análise Crítica' em ação. Às vezes, vemos nosso poder nos outros primeiro.</p>`;
                        }
                        html += `<hr class="my-6 border-white/20"><p class="text-sm"><strong>Próximo Destrave:</strong> Clareza Cirúrgica.</p>`;
                        break;
                    default:
                         html = `<h2 class="text-3xl font-bold mb-4">Passo Concluído!</h2><p class="text-xl mb-6">Excelente trabalho! Cada passo fortalece sua base.</p><hr class="my-6 border-white/20"><p class="text-sm"><strong>Próximo Destrave:</strong> Passo ${step + 1}.</p>`;
                        break;
                }
                this.ui.feedbackContent.innerHTML = html;
            },

            generateReport() {
                const { answers } = this.state;
                const reportContainer = document.getElementById('report-content');
                if (!reportContainer) return;
                reportContainer.innerHTML = '';
                const createReportSection = (title, content) => {
                    if (!content || (Array.isArray(content) && content.length === 0)) return '';
                    return `<div class="content-section"><h4 class="text-xl font-bold text-deep-ink mb-3">${title}</h4><div class="prose max-w-none text-gray-700 bg-gray-50 p-4 rounded-md">${Array.isArray(content) ? `<ul>${content.map(c => `<li>${c}</li>`).join('')}</ul>` : content.replace(/\n/g, '<br>')}</div></div>`;
                };
                let reportHTML = '';
                if (answers[1]) reportHTML += createReportSection('Passo 1: Seus Superpoderes Reconhecidos', answers[1].superpoderes);
                if (answers[2]) reportHTML += createReportSection('Passo 2: Sua Estrutura de Clareza', `<b>Situação:</b> ${answers[2].contexto || 'N/A'}<br><b>Manchete:</b> ${answers[2].ponto1 || 'N/A'}`);
                if (answers[4]) reportHTML += createReportSection('Passo 4: Seu Plano de Energia', `<b>Drenos:</b><br>${answers[4].drenos || 'N/A'}<br><b>Preparação:</b><br>${answers[4].preparacao || 'N/A'}<br><b>Recuperação:</b><br>${answers[4].recuperacao || 'N/A'}`);
                if (answers[6]) reportHTML += createReportSection('Passo 6: Seu Diário de Vitórias', answers[6].vitorias);
                if (answers[7]) reportHTML += createReportSection('Passo 7: Suas Metas Futuras', answers[7].metas);
                reportContainer.innerHTML = reportHTML;
                this.generateChart();
            },

            generateChart() {
                const allPowers = ["Escuta Profunda", "Análise Crítica", "Foco de Laser", "Observação Aguçada", "Integridade"];
                const userPowersRaw = this.state.answers[1]?.superpoderes || [];
                const powerMap = {"A Superaudição (Escuta Profunda)": "Escuta Profunda", "O Raio-X Mental (Análise Crítica)": "Análise Crítica", "O Foco de Laser (Concentração)": "Foco de Laser", "A Visão Além do Alcance (Observação Aguçada)": "Observação Aguçada", "A Bússola Interna (Integridade e Convicção)": "Integridade"};
                const userPowers = userPowersRaw.map(p => powerMap[p]);
                const data = allPowers.map(power => userPowers.includes(power) ? 5 : 1.5);
                const ctx = document.getElementById('superpoderesChart')?.getContext('2d');
                if(!ctx) return;
                if (window.myRadarChart) window.myRadarChart.destroy();
                window.myRadarChart = new Chart(ctx, {
                    type: 'radar',
                    data: {
                        labels: allPowers,
                        datasets: [{
                            label: 'Seu Perfil de Poder', data: data, fill: true,
                            backgroundColor: 'rgba(214, 158, 46, 0.2)', borderColor: 'rgb(214, 158, 46)',
                            pointBackgroundColor: 'rgb(214, 158, 46)', pointBorderColor: '#fff',
                            pointHoverBackgroundColor: '#fff', pointHoverBorderColor: 'rgb(214, 158, 46)'
                        }]
                    },
                    options: {
                        responsive: true, maintainAspectRatio: false,
                        scales: { r: {
                               beginAtZero: true, suggestedMin: 0, suggestedMax: 5,
                                ticks: { display: false, stepSize: 1 },
                                pointLabels: { font: { size: 12, weight: 'bold' }, color: '#D1D5DB' },
                                grid: { color: 'rgba(107, 114, 128, 0.5)' },
                                angleLines: { color: 'rgba(107, 114, 128, 0.5)' }
                        }},
                        plugins: { legend: { display: false } }
                    }
                });
            }
        };

        app.init();
    });
    </script>
</body>
</html>
